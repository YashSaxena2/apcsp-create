<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
  <div class="code">

    <!--Searchbar and Search button-->
    <input type="text" name="searchTicker" id="searchTicker">
    <input id="SearchButton" type="button" value="Search" onclick="doWork()">

    <!--Javascript Code-->
    <script type="text/javascript">
      async function getHTML(url) {
        var res = await fetch(url);
        var html = await res.text();
        return html;
      }
      function parseHtmlTarget(html, target) {
        var parser = new DOMParser();
        var doc = parser.parseFromString(html, "text/html");
        //console.log(doc);
        var targets = doc.querySelector(target);
        var output = targets.innerHTML;
        return output;

      }
      async function doWork() {
        //Gets stock's ticker
        var ticker = document.getElementById('searchTicker').value

        //Gets stock quote
        var quoteUrl = "https://www.cnbc.com/quotes/" + ticker
        var quoteHtml = await getHTML(quoteUrl);
        var quote = parseHtmlTarget(quoteHtml, '.QuoteStrip-lastPrice');

        //Gets stock description
/*
        var descUrl = "https://finance.yahoo.com/quote/" + ticker + "/profile?p=" + ticker
        var descHtml = await getHTML(descUrl);
        var desc = parseHtmlTarget(descHtml, '.Mt(15px) Lh(1.6)');
*/
        //Writes data
        document.write(quote)
      }
    </script>
  </div>
  </body>
</html>
